## Web Services 03 (HTTP PUT, @RequestBody, Content-Type)

How to develop those kind of REST API's which would demand clients to make the `HTTP PUT` kind of request on them and in addition to that We are also going to talk about the use of `@RequestBody` annotation as well as the `Content-type` request header.


### Question:

In what scenarios you want to develop a REST API which demands `GET` & `PUT` type of request to be made on them?

GET - Where you want to clients to read some data which is available on the server side.

PUT - Where you want clients to update certain information which is kept on the server side.

### Requirement:

Here my requirement is client should be able to modify a specific student's record Which is present at the server side.

So I want to basically develop below REST API which I want to give the clients so that The client would make a `PUT` request on this REST API.

![image](https://user-images.githubusercontent.com/35020560/59968286-d97ab580-9554-11e9-8e8f-02f03522becb.png)


And in this REST API itself clients would need to specify the `name` of the student which they want to modify at the server side and along with the request.

![image](https://user-images.githubusercontent.com/35020560/59968291-f2836680-9554-11e9-8be6-9f908f1dd61a.png)


The client would also need to specify the information may be in the `JSON` format or in the `XML` format which they want to update which corresponds to this particular student at the server side.

![image](https://user-images.githubusercontent.com/35020560/59968296-1f377e00-9555-11e9-91e5-694c8c665497.png)


Now i am going to make a `PUT` request on this REST API with this information what's going to happen The request goes to reach this rest API controller.

```
@RequestMapping(value= "/student/{name}", method=RequestMethod.PUT)
		 public boolean updateStudent(@PathVariable("name") String studentName,@RequestBody Student student) {
         }
```

![image](https://user-images.githubusercontent.com/35020560/59968597-98d16b00-9559-11e9-8e0a-c33308bf0c16.png)

But here the problem is for @RequestBody annotation to work means to map this information to the properties of student object this need to know in what format that info has sent by the client so for this work properly client also needs to sent information about in what format he has specified this info along with the request.

Here we have specified info in `JSON` format so here I would need to include a header with Key as `content-type` with its value as `application/JSON`.

![image](https://user-images.githubusercontent.com/35020560/59968622-2f059100-955a-11e9-9477-ed8973a71277.png)

#### OUTPUT:
![image](https://user-images.githubusercontent.com/35020560/59968631-42b0f780-955a-11e9-9cf0-342583c2b3ff.png)

#### XML:

![image](https://user-images.githubusercontent.com/35020560/59968802-67f33500-955d-11e9-80d3-0a8736e22852.png)


![image](https://user-images.githubusercontent.com/35020560/59968761-bd7b1200-955c-11e9-9194-3bc1c3320362.png)


## Web Services 03 (@RequestMapping using Consumes)

### Requirement:
What if we have a very specific requirement that we want below REST API controller method to support only one format Means here we want to restrict the client to specify input information in only one format. 

So how to do that?

```
@RequestMapping(value= "/student/{name}", method=RequestMethod.PUT)
public boolean updateStudent(@PathVariable("name") String studentName,@RequestBody Student student) {
   System.out.println("Student Name: "+studentName);
   System.out.println("Student Name: "+student.getName() +"Student Hobby: "+student.getHobby());
   return true;
}
```

Let's say we want this REST API controller method to work in only those cases when the client is specifying input information message in `XML` format only.

That can be achieved by making use of `consumes` argument with `@RequestMapping` annotation. So how it works, let's understand that?

```
@RequestMapping(value= "/student/{name}", method=RequestMethod.PUT,consumes= MediaType.APPLICATION_XML_VALUE)
```
Because of this `consumes` argument, We have restricted this REST API controller method to work for only those Where a client has specified the message in the only `XML` format.

This is going to find out that a message has come in any other format other than `XML` Then it's going to simply throw an error it's not going to work so this is the kind of restriction we have imposed using `consumes` argument with request mapping annotation.

```
 @RequestMapping(value= "/student/{name}", method=RequestMethod.PUT,consumes= MediaType.APPLICATION_XML_VALUE)
 public boolean updateStudent(@PathVariable("name") String studentName,@RequestBody Student student) {
	System.out.println("Student Name: "+studentName);
	System.out.println("Student Name: "+student.getName() +"Student Hobby: "+student.getHobby());
			 
	// find the matching student record using "StudentName" from the DB
	// update the matching student record with the information of student sent by the client
	 // return true if update is successfully done and return false if update is not done successfully
	 return true;
 }

```

![image](https://user-images.githubusercontent.com/35020560/59972353-1ffaff00-95ab-11e9-8b8c-55fbb8f63207.png)

![image](https://user-images.githubusercontent.com/35020560/59972360-36a15600-95ab-11e9-8ab9-ae8c4a3e9603.png)

JSON:

![image](https://user-images.githubusercontent.com/35020560/59972364-47ea6280-95ab-11e9-9430-9889b89e42f7.png)

![image](https://user-images.githubusercontent.com/35020560/59972369-5769ab80-95ab-11e9-837d-127bd24fe23a.png)



